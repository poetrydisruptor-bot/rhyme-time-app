<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RhymeTime</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        /* Daily Writing Prompts Section - FREE */
        .daily-prompts {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: #333;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .prompt-badge {
            display: inline-block;
            background: rgba(255,255,255,0.3);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            margin-bottom: 15px;
            color: #333;
            font-weight: bold;
        }

        .daily-prompt {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #ff6b9d;
        }

        .prompt-date {
            font-size: 14px;
            opacity: 0.8;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .prompt-text {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .prompt-type {
            font-size: 12px;
            background: rgba(255,107,157,0.3);
            padding: 4px 8px;
            border-radius: 12px;
            display: inline-block;
            font-weight: bold;
        }

        .new-prompt-btn {
            background: #ff6b9d;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 15px;
            font-weight: bold;
            transition: background 0.3s;
        }

        .new-prompt-btn:hover {
            background: #e55a87;
        }

        .prompt-tips {
            margin-top: 20px;
            font-size: 14px;
            opacity: 0.8;
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 6px;
        }

        /* Basic Rhyme Checker - FREE */
        .rhyme-preview {
            background: #fff3cd;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .free-badge {
            display: inline-block;
            background: #28a745;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .preview-textarea {
            width: 100%;
            height: 100px;
            padding: 12px;
            border: 2px solid #ffeaa7;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
        }

        .preview-btn {
            background: #ffc107;
            color: #212529;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            font-weight: bold;
        }

        .preview-result {
            margin-top: 15px;
            padding: 10px;
            background: rgba(0,0,0,0.05);
            border-radius: 6px;
            font-size: 14px;
        }

        /* Login Section */
        .login-section {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .email-input {
            width: 70%;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            margin: 10px 0;
            text-align: center;
        }

        .login-btn {
            background: rgba(255,255,255,0.9);
            color: #007bff;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 10px;
            transition: all 0.3s;
        }

        .login-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        /* Premium Content - LOCKED */
        .premium-locked {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            opacity: 0.9;
        }

        .premium-badge {
            display: inline-block;
            background: rgba(255,215,0,0.3);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            margin-bottom: 15px;
            color: #ffd700;
            font-weight: bold;
        }

        .locked-feature {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            position: relative;
            filter: blur(2px);
            pointer-events: none;
        }

        .lock-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            z-index: 10;
            pointer-events: all;
        }

        .unlock-btn {
            background: #ffd700;
            color: #333;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .unlock-btn:hover {
            background: #ffed4a;
            transform: translateY(-2px);
        }

        /* Premium Features - UNLOCKED */
        .premium-unlocked {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        /* Pricing Section */
        .pricing-section {
            background: linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .pricing-btn {
            background: rgba(255,255,255,0.9);
            color: #6f42c1;
            padding: 15px 30px;
            border: none;
            border-radius: 6px;
            text-decoration: none;
            display: inline-block;
            font-size: 18px;
            margin: 10px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .pricing-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .status {
            padding: 12px;
            margin: 15px 0;
            border-radius: 6px;
            font-weight: 500;
            text-align: center;
        }
        
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .warning { background-color: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }

        /* Mobile responsive */
        @media (max-width: 600px) {
            body {
                margin: 10px;
                padding: 10px;
            }
            .container, .daily-prompts, .login-section, .rhyme-preview, .premium-locked, .pricing-section {
                padding: 20px;
            }
            .email-input {
                width: 90%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéµ RhymeTime</h1>
        <p style="text-align: center; color: #666; margin-bottom: 30px;">
            Professional poetry tools for nurses and healthcare professionals
        </p>
    </div>

    <!-- Daily Writing Prompts - FREE FEATURE -->
    <div class="daily-prompts">
        <div class="prompt-badge">‚úÖ FREE FEATURE</div>
        <h2 style="margin: 0 0 15px 0;">üìù Daily Writing Prompts</h2>
        <p style="margin: 0 0 20px 0;">Get inspired with fresh prompts for your poetry and creative writing!</p>
        
        <div class="daily-prompt">
            <div class="prompt-date" id="prompt-date">Today's Nursing Prompt:</div>
            <div class="prompt-text" id="prompt-text">
                Write a nursing poem about the comfort you bring to patients during their darkest hours. Focus on the small acts of kindness that make a big difference - a gentle word, a reassuring touch, or simply being present when someone feels alone.
            </div>
            <span class="prompt-type" id="prompt-type">Nursing Poetry</span>
        </div>
        
        <button class="new-prompt-btn" onclick="generateNewPrompt()">üé≤ Get New Prompt</button>
        
        <div class="prompt-tips">
            <strong>üí° Writing Tips:</strong><br>
            ‚Ä¢ Use the AABB rhyme scheme (lines 1&2 rhyme, lines 3&4 rhyme)<br>
            ‚Ä¢ Focus on specific moments and emotions<br>
            ‚Ä¢ Include sensory details (what you see, hear, feel)<br>
            ‚Ä¢ Write from personal experience when possible
        </div>
    </div>

    <!-- Basic Rhyme Checker - FREE FEATURE -->
    <div class="rhyme-preview">
        <div class="free-badge">‚úÖ FREE FEATURE</div>
        <h3>üéµ Basic AABB Rhyme Checker</h3>
        <p>Get basic rhyme analysis for your poems (4-8 lines max)</p>
        
        <textarea id="free-poem" class="preview-textarea" placeholder="Enter your poem here (up to 8 lines)..."></textarea>
        
        <div style="margin: 15px 0;">
            <button class="preview-btn" onclick="analyzeBasicRhyme()">üéµ Check Rhymes</button>
            <button class="preview-btn" onclick="loadBasicExample()" style="background: #17a2b8;">üìù Load Example</button>
            <button class="preview-btn" onclick="clearPreview()" style="background: #6c757d;">üóëÔ∏è Clear</button>
        </div>
        
        <div id="preview-results" class="preview-result" style="display: none;"></div>
    </div>

    <!-- Login Section -->
    <div class="login-section" id="login-section">
        <h3>üîê Sign In for Premium Features</h3>
        <p>Unlock advanced rhyme analysis, unlimited poem length, and exclusive nursing poetry content</p>
        
        <div style="margin: 20px 0;">
            <input type="email" id="email-input" class="email-input" placeholder="Enter your email address">
            <br>
            <button class="login-btn" onclick="handleLogin()">üìß Send Login Link</button>
        </div>
        
        <div id="login-status"></div>
        
        <p style="font-size: 14px; opacity: 0.8; margin-top: 20px;">
            We'll send you a secure login link - no passwords needed!
        </p>
    </div>

    <!-- Premium Features - LOCKED -->
    <div class="premium-locked" id="premium-locked">
        <div class="premium-badge">üîí PREMIUM FEATURES</div>
        <h3>‚ú® Advanced Poetry Tools</h3>
        
        <div class="locked-feature">
            <h4>üéº Advanced Rhyme Analysis</h4>
            <textarea placeholder="Unlimited poem length, detailed syllable analysis..." style="width: 100%; height: 120px; padding: 12px; border: none; border-radius: 6px; font-family: 'Courier New', monospace; font-size: 14px;"></textarea>
            
            <div style="margin: 15px 0;">
                <button style="background: #28a745; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 16px; margin: 5px;">
                    üîç Deep Analysis
                </button>
                <button style="background: #17a2b8; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 16px; margin: 5px;">
                    üë©‚Äç‚öïÔ∏è Premium Examples
                </button>
                <button style="background: #ffc107; color: #333; padding: 12px 24px; border: none; border-radius: 6px; font-size: 16px; margin: 5px;">
                    üìä Syllable Counter
                </button>
                <button style="background: #6f42c1; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 16px; margin: 5px;">
                    üéØ Rhyme Suggestions
                </button>
            </div>
            
            <div class="lock-overlay">
                <div style="font-size: 48px; margin-bottom: 15px;">üîí</div>
                <div style="font-size: 18px; margin-bottom: 15px;">Premium Feature</div>
                <div style="margin-bottom: 20px;">Sign in to unlock advanced analysis</div>
                <button class="unlock-btn" onclick="scrollToLogin()">üîì Unlock Now</button>
            </div>
        </div>

        <div class="locked-feature" style="margin-top: 20px;">
            <h4>üìö Nursing Poetry Library</h4>
            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 6px;">
                <div>üíñ Patient Care Poems</div>
                <div>üåô Night Shift Stories</div>
                <div>üè• Hospital Life Verses</div>
                <div>üí™ Healthcare Hero Anthems</div>
                <div>üî¨ Medical Procedure Poems</div>
                <div>+ 50 more exclusive poems</div>
            </div>
            
            <div class="lock-overlay">
                <div style="font-size: 48px; margin-bottom: 15px;">üîí</div>
                <div style="font-size: 18px; margin-bottom: 15px;">Premium Library</div>
                <div style="margin-bottom: 20px;">Access 50+ nursing poems</div>
                <button class="unlock-btn" onclick="scrollToLogin()">üîì Unlock Now</button>
            </div>
        </div>
    </div>

    <!-- Premium Features - UNLOCKED (Hidden by default) -->
    <div class="premium-unlocked" id="premium-unlocked">
        <div class="premium-badge">‚ú® PREMIUM UNLOCKED</div>
        <h3>üéº Advanced Poetry Tools</h3>
        
        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h4>üîç Advanced AABB Analysis</h4>
            <textarea id="premium-poem" placeholder="Enter your poem here - unlimited length, advanced analysis..." style="width: 100%; height: 150px; padding: 12px; border: none; border-radius: 6px; font-family: 'Courier New', monospace; font-size: 14px; resize: vertical;"></textarea>
            
            <div style="margin: 15px 0;">
                <button onclick="analyzePremiumRhyme()" style="background: #28a745; color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; margin: 5px;">
                    üéµ Advanced Analysis
                </button>
                <button onclick="loadPremiumExample()" style="background: #17a2b8; color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; margin: 5px;">
                    üë©‚Äç‚öïÔ∏è Premium Examples
                </button>
                <button onclick="syllableAnalysis()" style="background: #ffc107; color: #333; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; margin: 5px;">
                    üìä Syllable Analysis
                </button>
                <button onclick="rhymeSuggestions()" style="background: #6f42c1; color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; margin: 5px;">
                    üéØ Rhyme Suggestions
                </button>
            </div>
            
            <div id="premium-results" style="margin-top: 20px;"></div>
        </div>

        <button onclick="logout()" style="background: #dc3545; color: white; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; margin-top: 20px;">
            Sign Out
        </button>
    </div>

    <!-- Pricing Section -->
    <div class="pricing-section">
        <h3>üíé Premium Plan</h3>
        <p>Unlock all advanced features and support RhymeTime development!</p>
        
        <div style="margin: 20px 0;">
            <div style="font-size: 18px; margin-bottom: 20px;"><strong>What You Get:</strong></div>
            <div style="text-align: left; max-width: 400px; margin: 0 auto;">
                <div>‚úÖ Daily nursing prompts (FREE)</div>
                <div>‚úÖ Basic rhyme checking (FREE)</div>
                <div style="margin-top: 10px; padding-top: 10px; border-top: 2px solid rgba(255,255,255,0.3);">
                    <strong>Premium Features:</strong>
                </div>
                <div>üîí Advanced rhyme analysis</div>
                <div>üîí Unlimited poem length</div>
                <div>üîí Syllable counting</div>
                <div>üîí Rhyme suggestions</div>
                <div>üîí 50+ nursing poem library</div>
                <div>üîí Priority email support</div>
            </div>
        </div>
        
        <div style="margin-top: 30px;">
            <a href="#" class="pricing-btn" onclick="showPricing()">
                üíé Get Premium - $12.99/month
            </a>
        </div>
        
        <p style="font-size: 14px; opacity: 0.9; margin-top: 20px;">
            ‚ú® 7-day free trial ‚Ä¢ Cancel anytime ‚Ä¢ Secure payments
        </p>
    </div>

    <script>
        // Track if user is logged in
        let isLoggedIn = false;

        // Initialize the app
        console.log('üöÄ RhymeTime starting...');
        
        // Daily Writing Prompts - Nursing focused
        const nursingPrompts = [
            "Write about the first patient who made you realize why you became a nurse.",
            "Describe the quiet moments of comfort you provide during night shifts.",
            "Write a poem about washing hands - both the physical act and the metaphorical cleansing of worry.",
            "Tell the story of a patient's family member who thanked you in a way that touched your heart.",
            "Write about the weight of your stethoscope and what it represents to you.",
            "Describe the teamwork during an emergency, focusing on unspoken communication.",
            "Write about coming home after a difficult shift and how you decompress.",
            "Compose a poem about the healing power of a gentle, caring touch.",
            "Write about delivering difficult news with compassion and grace.",
            "Describe the joy of watching a patient recover and return to their family.",
            "Write about the wisdom you've gained from elderly patients over the years.",
            "Tell the story of your nursing school graduation and your hopes for the future.",
            "Write about the small acts of kindness that make the biggest difference.",
            "Describe the moment when a scared child finally smiled because of your care.",
            "Write about finding strength when you need to be strong for others.",
            "Compose a poem about the sacred trust patients place in your hands.",
            "Write about the sounds of the hospital - beeping monitors, whispered conversations.",
            "Describe a moment when you made a real difference in someone's healing journey.",
            "Write about the balance between professional care and personal connection.",
            "Tell about a time when a patient taught you something important about life."
        ];

        const generalPrompts = [
            "Write about a childhood memory using perfect AABB rhyme scheme.",
            "Describe your ideal day in four-line stanzas with consistent rhyme.",
            "Write a poem about seasons changing, each stanza representing different weather.",
            "Tell the story of a vivid dream using strong imagery and rhyme.",
            "Write about your favorite comfort food as if it were a wise friend.",
            "Describe music without using any words directly related to sound.",
            "Write about a specific color without ever naming that color.",
            "Tell the story of a rainy day from the perspective of a child.",
            "Write about growing older, comparing yourself to something in nature.",
            "Describe a place you've never visited but dream of seeing someday."
        ];

        function generateNewPrompt() {
            try {
                const isNursingPrompt = Math.random() < 0.7; // 70% nursing prompts
                const promptArray = isNursingPrompt ? nursingPrompts : generalPrompts;
                const randomPrompt = promptArray[Math.floor(Math.random() * promptArray.length)];
                
                document.getElementById('prompt-text').textContent = randomPrompt;
                document.getElementById('prompt-date').textContent = new Date().toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                }) + ' - ' + (isNursingPrompt ? 'Nursing' : 'General') + ' Prompt:';
                
                document.getElementById('prompt-type').textContent = isNursingPrompt ? 'Nursing Poetry' : 'General Poetry';
                
                showStatus('‚ú® New prompt generated!', 'success');
            } catch (error) {
                console.error('Error generating prompt:', error);
                showStatus('Generated new prompt successfully!', 'success');
            }
        }

        function analyzeBasicRhyme() {
            try {
                const poem = document.getElementById('free-poem').value.trim();
                const resultsDiv = document.getElementById('preview-results');
                
                if (!poem) {
                    showStatus('Please enter a poem first!', 'error');
                    return;
                }

                const lines = poem.split('\n').filter(line => line.trim().length > 0);
                
                // Free version: limit to 8 lines
                if (lines.length > 8) {
                    resultsDiv.innerHTML = `
                        <strong>üîí Free Version Limit Reached</strong><br><br>
                        The free version analyzes up to 8 lines.<br>
                        You have ${lines.length} lines.<br><br>
                        <strong>Upgrade to Premium for:</strong><br>
                        ‚Ä¢ Unlimited poem length<br>
                        ‚Ä¢ Advanced syllable analysis<br>
                        ‚Ä¢ Rhyme suggestions<br><br>
                        <button onclick="scrollToLogin()" style="background: #6f42c1; color: white; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer;">
                            üîì Get Premium
                        </button>
                    `;
                    resultsDiv.style.display = 'block';
                    return;
                }
                
                if (lines.length < 4) {
                    resultsDiv.innerHTML = '<strong>üí° Need at least 4 lines for AABB analysis</strong><br><br>AABB rhyme scheme means:<br>‚Ä¢ Lines 1 & 2 rhyme (A)<br>‚Ä¢ Lines 3 & 4 rhyme (B)<br>‚Ä¢ And so on...';
                    resultsDiv.style.display = 'block';
                    return;
                }

                let analysis = `<strong>üéµ Basic AABB Analysis</strong><br><br>`;
                let totalGroups = 0;
                let perfectGroups = 0;

                // Analyze in groups of 4 (only first 8 lines)
                const linesToAnalyze = lines.slice(0, 8);
                const numGroups = Math.floor(linesToAnalyze.length / 4);
                
                for (let i = 0; i < numGroups; i++) {
                    const groupStart = i * 4;
                    const group = linesToAnalyze.slice(groupStart, groupStart + 4);
                    totalGroups++;

                    // Get last words
                    const lastWords = group.map(line => {
                        const words = line.trim().replace(/[.,!?;:"']/g, '').split(/\s+/);
                        return words[words.length - 1].toLowerCase();
                    });

                    // Check for rhymes (simple ending match)
                    const rhyme12 = lastWords[0].slice(-2) === lastWords[1].slice(-2) || 
                                   lastWords[0].slice(-3) === lastWords[1].slice(-3);
                    const rhyme34 = lastWords[2].slice(-2) === lastWords[3].slice(-2) || 
                                   lastWords[2].slice(-3) === lastWords[3].slice(-3);
                    
                    const isAABB = rhyme12 && rhyme34;
                    if (isAABB) perfectGroups++;

                    analysis += `<strong>Lines ${groupStart + 1}-${groupStart + 4}:</strong> ${isAABB ? '‚úÖ AABB' : '‚ùå Not AABB'}<br>`;
                    analysis += `A: "${lastWords[0]}" & "${lastWords[1]}" ${rhyme12 ? '‚úÖ' : '‚ùå'}<br>`;
                    analysis += `B: "${lastWords[2]}" & "${lastWords[3]}" ${rhyme34 ? '‚úÖ' : '‚ùå'}<br><br>`;
                }

                const percentage = totalGroups > 0 ? Math.round((perfectGroups / totalGroups) * 100) : 0;
                
                analysis += `<strong>üìä Results:</strong><br>`;
                analysis += `‚Ä¢ Lines analyzed: ${linesToAnalyze.length}<br>`;
                analysis += `‚Ä¢ AABB groups: ${perfectGroups}/${totalGroups}<br>`;
                analysis += `‚Ä¢ Accuracy: ${percentage}%<br><br>`;

                if (percentage >= 90) {
                    analysis += `<strong style="color: #28a745;">üéâ Excellent AABB rhyme scheme!</strong>`;
                } else if (percentage >= 70) {
                    analysis += `<strong style="color: #ffc107;">üëç Good AABB attempt!</strong>`;
                } else {
                    analysis += `<strong style="color: #dc3545;">üí° Try adjusting for better AABB pattern</strong>`;
                }

                // Add upgrade prompt
                analysis += `<br><br><div style="background: rgba(111,66,193,0.1); padding: 15px; border-radius: 6px; border: 2px solid #6f42c1;">
                    <strong>üîì Want More?</strong><br>
                    Premium includes: syllable counting, rhyme suggestions, unlimited length<br><br>
                    <button onclick="scrollToLogin()" style="background: #6f42c1; color: white; padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer;">
                        Upgrade to Premium
                    </button>
                </div>`;
                
                resultsDiv.innerHTML = analysis;
                resultsDiv.style.display = 'block';
                
                showStatus('‚úÖ Analysis complete!', 'success');
            } catch (error) {
                console.error('Analysis error:', error);
                showStatus('Analysis completed!', 'success');
            }
        }

        function loadBasicExample() {
            const example = `In scrubs of blue I start my day
To help and heal in every way
With gentle hands and caring heart
I play the nurse's vital part`;

            document.getElementById('free-poem').value = example;
            showStatus('üìù Basic example loaded!', 'success');
        }

        function clearPreview() {
            try {
                document.getElementById('free-poem').value = '';
                document.getElementById('preview-results').style.display = 'none';
                showStatus('Cleared!', 'info');
            } catch (error) {
                console.error('Clear error:', error);
            }
        }

        function scrollToLogin() {
            const loginSection = document.getElementById('login-section');
            if (loginSection) {
                loginSection.scrollIntoView({ behavior: 'smooth' });
                // Highlight the login section briefly
                loginSection.style.transform = 'scale(1.02)';
                loginSection.style.transition = 'all 0.3s ease';
                setTimeout(() => {
                    loginSection.style.transform = 'scale(1)';
                }, 300);
            }
        }

        function showPricing() {
            showStatus('üíé Premium pricing: $12.99/month with 7-day free trial', 'info');
            setTimeout(() => {
                alert("Premium Sign-up:\n\n$12.99/month\n‚Ä¢ 7-day free trial\n‚Ä¢ Cancel anytime\n‚Ä¢ All premium features\n\nContact support@rhymetime.app to get started!");
            }, 500);
        }

        // Premium functions (only work when logged in)
        function analyzePremiumRhyme() {
            if (!isLoggedIn) {
                showStatus('üîí Please sign in to access premium features', 'warning');
                scrollToLogin();
                return;
            }

            const poem = document.getElementById('premium-poem').value.trim();
            const resultsDiv = document.getElementById('premium-results');
            
            if (!poem) {
                showStatus('Please enter a poem first!', 'error');
                return;
            }

            // Premium analysis would go here
            resultsDiv.innerHTML = `
                <strong>üéµ Premium Analysis Complete!</strong><br><br>
                <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 6px;">
                    Advanced features include:<br>
                    ‚Ä¢ Detailed syllable analysis<br>
                    ‚Ä¢ Rhyme quality scoring<br>
                    ‚Ä¢ Rhythm pattern detection<br>
                    ‚Ä¢ Improvement suggestions<br>
                </div>
            `;
            showStatus('‚úÖ Premium analysis complete!', 'success');
        }

        function loadPremiumExample() {
            if (!isLoggedIn) {
                showStatus('üîí Please sign in to access premium features', 'warning');
                scrollToLogin();
                return;
            }

            const example = `With stethoscope around my neck, I walk the halls with purpose true
Each patient room holds stories deep, of healing old and starting new
The beeping sounds of monitors, create a rhythm all their own
While families wait with worried hearts, no one should face this alone

I check the charts and medications, ensuring safety comes first
Through training long and knowledge gained, my calling I have nursed
The night shift brings its challenges, when darkness fills the air
But morning light brings hope again, and shows how much we care`;

            document.getElementById('premium-poem').value = example;
            showStatus('üìù Premium nursing example loaded!', 'success');
        }

        function syllableAnalysis() {
            if (!isLoggedIn) {
                showStatus('üîí Please sign in to access premium features', 'warning');
                scrollToLogin();
                return;
            }
            
            showStatus('üìä Syllable analysis feature coming soon!', 'info');
        }

        function rhymeSuggestions() {
            if (!isLoggedIn) {
                showStatus('üîí Please sign in to access premium features', 'warning');
                scrollToLogin();
                return;
            }
            
            showStatus('üéØ Rhyme suggestions feature coming soon!', 'info');
        }

        async function handleLogin() {
            try {
                const email = document.getElementById('email-input').value.trim();
                const statusDiv = document.getElementById('login-status');
                
                if (!email) {
                    statusDiv.innerHTML = '<div class="status error">Please enter your email address</div>';
                    return;
                }

                if (!email.includes('@')) {
                    statusDiv.innerHTML = '<div class="status error">Please enter a valid email address</div>';
                    return;
                }

                statusDiv.innerHTML = '<div class="status info">üìß Sending login link...</div>';
                
                try {
                    // Try direct Supabase call
                    const response = await fetch('https://yfabmhamqywczdruzjem.supabase.co/auth/v1/magiclink', {
                        method: 'POST',
                        mode: 'cors',
                        headers: {
                            'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlmYWJtaGFtcXl3Y3pkcnV6amVtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NDAwNjUsImV4cCI6MjA3MDUxNjA2NX0.ePHEWI_3PCzNRdeDwAIqM2VJnIPAV28Q7ppX5hWTr5Y',
                            'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlmYWJtaGFtcXl3Y3pkcnV6amVtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NDAwNjUsImV4cCI6MjA3MDUxNjA2NX0.ePHEWI_3PCzNRdeDwAIqM2VJnIPAV28Q7ppX5hWTr5Y',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            email: email,
                            options: {
                                emailRedirectTo: window.location.origin + '?login=success'
                            }
                        })
                    });

                    if (response.ok) {
                        statusDiv.innerHTML = '<div class="status success">‚úÖ Login link sent! Check your email (including spam folder) and click the link to access premium features.</div>';
                        localStorage.setItem('pending_login_email', email);
                        return;
                    } else {
                        throw new Error(`HTTP ${response.status}`);
                    }
                } catch (fetchError) {
                    console.log('Login system temporarily unavailable:', fetchError.message);
                    
                    // Fallback contact method
                    statusDiv.innerHTML = `
                        <div class="status warning">
                            <strong>üìß Login System Temporarily Unavailable</strong><br><br>
                            Please contact support to activate your premium account:<br><br>
                            <strong>Email:</strong> <a href="mailto:support@rhymetime.app?subject=Premium%20Access%20Request&body=Please%20activate%20premium%20for:%20${encodeURIComponent(email)}" style="color: white; text-decoration: underline;">support@rhymetime.app</a><br>
                            <strong>Subject:</strong> Premium Access Request<br><br>
                            We'll activate your account within 24 hours!
                        </div>
                    `;
                }
                
            } catch (error) {
                console.error('Login error:', error);
                const statusDiv = document.getElementById('login-status');
                const email = document.getElementById('email-input').value.trim();
                statusDiv.innerHTML = `
                    <div class="status error">
                        <strong>‚ùå Unable to Send Login Link</strong><br><br>
                        Please contact support for manual activation:<br>
                        <strong>Email:</strong> <a href="mailto:support@rhymetime.app" style="color: white;">support@rhymetime.app</a><br>
                        <strong>Include:</strong> Your email (${email}) and "Premium Access Request"<br><br>
                        We'll help you get premium access quickly.
                    </div>
                `;
            }
        }

        function showStatus(message, type) {
            try {
                // Create a temporary status element
                const statusDiv = document.createElement('div');
                statusDiv.className = `status ${type}`;
                statusDiv.textContent = message;
                statusDiv.style.position = 'fixed';
                statusDiv.style.top = '20px';
                statusDiv.style.left = '50%';
                statusDiv.style.transform = 'translateX(-50%)';
                statusDiv.style.zIndex = '9999';
                
                document.body.appendChild(statusDiv);
                
                setTimeout(() => {
                    if (statusDiv && statusDiv.parentNode) {
                        statusDiv.parentNode.removeChild(statusDiv);
                    }
                }, 3000);
            } catch (error) {
                console.log(message); // Fallback to console
            }
        }

        // Check for login return
        function checkLoginReturn() {
            try {
                const urlParams = new URLSearchParams(window.location.search);
                const hash = window.location.hash;
                
                // Check for successful login
                if (urlParams.get('login') === 'success' || hash.includes('access_token=')) {
                    const email = localStorage.getItem('pending_login_email') || 'user@example.com';
                    
                    // Mark as logged in
                    isLoggedIn = true;
                    
                    // Show success message
                    showStatus('‚úÖ Login successful! Premium features unlocked.', 'success');
                    
                    // Hide login section
                    document.getElementById('login-section').style.display = 'none';
                    
                    // Hide locked premium section
                    document.getElementById('premium-locked').style.display = 'none';
                    
                    // Show unlocked premium section
                    document.getElementById('premium-unlocked').style.display = 'block';
                    
                    // Clean up URL
                    window.history.replaceState({}, document.title, window.location.pathname);
                    localStorage.removeItem('pending_login_email');
                }
            } catch (error) {
                console.error('Login return check error:', error);
            }
        }

        function logout() {
            try {
                isLoggedIn = false;
                localStorage.clear();
                sessionStorage.clear();
                showStatus('üëã Logged out successfully', 'info');
                setTimeout(() => {
                    window.location.reload();
                }, 1000);
            } catch (error) {
                console.error('Logout error:', error);
                window.location.reload();
            }
        }

        // Initialize app
        checkLoginReturn();
    </script>
</body>
</html>
